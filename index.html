<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <!-- Primary Meta Tags -->
  <title>Income Tax Calculator &amp; Resource Hub – Latest Budget Tax Structure</title>
  <meta name="title" content="Income Tax Calculator 2025-26 – Compare Old vs New Tax Regimes">
  <meta name="description" content="Calculate and compare your income tax under both old and new regimes for FY 2025-26. Get detailed breakdown and smart recommendations based on the latest budget.">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://indiaincometax.in">
  <meta property="og:title" content="Income Tax Calculator 2025-26 – Compare Old vs New Tax Regimes">
  <meta property="og:description" content="Calculate and compare your income tax under both old and new regimes for FY 2025-26. Get detailed breakdown and smart recommendations based on the latest budget.">
  <meta property="og:image" content="https://indiaincometax.in/tax-calculator-social.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://indiaincometax.in">
  <meta property="twitter:title" content="Income Tax Calculator 2025-26 – Compare Old vs New Tax Regimes">
  <meta property="twitter:description" content="Calculate and compare your income tax under both old and new regimes for FY 2025-26. Get detailed breakdown and smart recommendations based on the latest budget.">
  <meta property="twitter:image" content="https://indiaincometax.in/tax-calculator-social.png">

  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f5f5f5;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .container {
      background-color: #fff;
      max-width: 450px;
      width: 100%;
      padding: 25px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
      position: relative;
      box-sizing: border-box;
    }
    .header-container {
      text-align: center;
      margin: -25px -25px 25px -25px;
      padding: 20px 15px;
      border-bottom: 1px solid #eee;
      position: relative;
      background-color: #fff;
      border-radius: 8px 8px 0 0;
    }
    h1 {
      font-size: 1.75em;
      margin-bottom: 5px;
      color: #1a73e8;
      font-weight: 500;
      line-height: 1.2;
    }
    .tax-year {
      color: #4caf50;
      font-weight: 500;
      font-size: 1.1em;
      margin: 0 0 8px 0;
    }
    .tagline {
      font-size: 0.9em;
      color: #666;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      flex-wrap: wrap;
      text-align: center;
      line-height: 1.5;
    }
    .budget-badge {
      background-color: #e8f0fe;
      color: #1a73e8;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.9em;
      font-weight: 500;
      white-space: nowrap;
      text-decoration: none;
      transition: background-color 0.2s;
    }
    .budget-badge:hover {
      background-color: #d2e3fc;
      text-decoration: none;
    }
    p.intro {
      font-size: 0.95em;
      color: #666;
      margin-bottom: 25px;
    }
    label {
      display: block;
      font-size: 0.95em;
      color: #444;
      margin-bottom: 5px;
    }
    input {
      width: 100%;
      padding: 10px;
      font-size: 1em;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .note {
      font-size: 0.85em;
      color: #999;
      margin-top: -10px;
      margin-bottom: 15px;
    }
    button {
      width: 100%;
      padding: 12px;
      font-size: 1em;
      border: none;
      border-radius: 4px;
      background-color: #4caf50;
      color: #fff;
      cursor: pointer;
      margin-bottom: 20px;
    }
    button:hover {
      background-color: #45a049;
    }
    .result {
      padding: 20px;
    }
    .result h2 {
      margin-bottom: 15px;
    }
    .regime-section {
      margin-bottom: 30px;
    }
    .regime-title {
      font-size: 1.1em;
      color: #333;
      margin-bottom: 15px;
      padding-bottom: 8px;
      border-bottom: 2px solid #e0e0e0;
    }
    .result p {
      font-size: 0.95em;
      margin: 8px 0;
      color: #555;
    }
    .recommendation {
      font-weight: 500;
      color: #333;
    }
    .error {
      color: red;
      font-size: 0.9em;
      margin-bottom: 15px;
    }
    /* Quick Select Container */
    .quick-select-container {
      display: flex;
      overflow-x: auto;
      gap: 6px;
      padding: 4px 0;
      margin: 4px 0 15px 0;
      scrollbar-width: none;
      -ms-overflow-style: none;
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
      flex-wrap: nowrap;
      width: 100%;
    }
    
    .quick-select-container::-webkit-scrollbar {
      display: none;
    }

    .quick-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background-color: #f0f0f0;
      border: none;
      border-radius: 100px;
      padding: 4px 12px;
      cursor: pointer;
      font-size: 0.85em;
      white-space: nowrap;
      color: #666;
      font-weight: 400;
      transition: all 0.2s ease;
      width: fit-content;
      min-width: min-content;
      flex: 0 0 auto;
    }

    .quick-btn:hover {
      background-color: #e3e3e3;
      color: #333;
    }

    .quick-btn.active {
      background-color: #e8f5e9;
      color: #2e7d32;
      font-weight: 500;
    }

    .quick-btn:active {
      transform: scale(0.98);
    }

    /* Input Clear Button Styles */
    .input-wrapper {
      position: relative;
      width: 100%;
      box-sizing: border-box;
      display: flex;
      align-items: center;
    }

    .input-wrapper input {
      width: 100%;
      box-sizing: border-box;
      padding-right: 35px;
      height: 40px;
    }

    .clear-input {
      position: absolute;
      right: 10px;
      top: 0;
      bottom: 0;
      margin: auto;
      background: none;
      border: none;
      padding: 4px;
      cursor: pointer;
      color: #999;
      display: none;
      width: 24px;
      height: 24px;
      font-size: 24px;
      line-height: 1;
      border-radius: 50%;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .clear-input:hover {
      color: #666;
      background-color: #f0f0f0;
    }

    /* Update input container styles */
    .input-container {
      position: relative;
      margin-bottom: 15px;
      width: 100%;
    }

    .input-container input {
      margin-bottom: 4px;
    }

    .input-container .quick-select-container {
      position: relative;
      left: -4px;
      width: calc(100% + 8px);
    }

    /* Tax Breakdown Styles */
    .breakdown-container {
      background-color: #f8f9fa;
      border-radius: 8px;
      padding: 15px;
      border: 1px solid #e0e0e0;
    }

    .breakdown-details {
      font-size: 0.9em;
    }

    .breakdown-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      color: #555;
    }

    .breakdown-row.total {
      font-weight: 500;
      color: #333;
      border-top: 1px solid #e0e0e0;
      margin-top: 12px;
      padding-top: 12px;
    }

    .breakdown-row .label {
      flex: 1;
    }

    .breakdown-row .amount {
      text-align: right;
      font-family: monospace;
      margin-left: 15px;
    }

    .collapsed {
      display: none;
    }

    /* Resources Section */
    .resources {
      background-color: #fff;
      max-width: 950px;
      width: 100%;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
    }
    .resources h2 {
      font-size: 1.5em;
      color: #333;
      margin-bottom: 15px;
      text-align: center;
    }
    .resource-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      grid-gap: 15px;
    }
    .resource-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      padding: 10px;
      background-color: #fafafa;
      transition: box-shadow 0.3s ease;
    }
    .resource-item:hover {
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }
    .resource-item img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 10px;
      background-color: #f5f5f5;
      padding: 8px;
    }
    .resource-item a {
      text-decoration: none;
      color: #1a73e8;
      font-size: 0.9em;
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      height: 2.8em;
    }
    .resource-item a:hover {
      text-decoration: underline;
    }
    .show-more-container {
      text-align: center;
      margin: 15px 0;
      border-top: 1px solid #eee;
      padding-top: 15px;
    }

    .show-more-btn {
      background: none;
      border: none;
      color: #1a73e8;
      font-size: 0.9em;
      padding: 5px 15px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-weight: 500;
      transition: color 0.2s;
    }

    .show-more-btn:hover {
      color: #1557b0;
      text-decoration: underline;
    }

    .show-more-btn::after {
      content: '▼';
      font-size: 0.8em;
      margin-left: 4px;
      transition: transform 0.2s;
    }

    .show-more-btn.expanded::after {
      transform: rotate(180deg);
    }

    /* Update share button styles */
    .share-button {
      position: fixed;
      top: 50%;
      right: 0;
      transform: translateY(-50%);
      background-color: #1a73e8;
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px;
      border-radius: 4px 0 0 4px;
      box-shadow: -2px 2px 8px rgba(0, 0, 0, 0.1);
      transition: all 0.2s ease;
      z-index: 1000;
      width: 32px;
      height: 32px;
    }

    .share-button:hover {
      background-color: #1557b0;
      width: 36px;
    }

    .share-button svg {
      width: 16px;
      height: 16px;
      fill: currentColor;
    }

    @media (max-width: 600px) {
      .share-button {
        width: 28px;
        height: 28px;
        padding: 6px;
      }

      .share-button:hover {
        width: 32px;
      }

      .share-button svg {
        width: 14px;
        height: 14px;
      }

      .tagline {
        font-size: 0.85em;
        padding: 0 10px;
      }

      .budget-badge {
        font-size: 0.85em;
        padding: 2px 6px;
      }

      h1 {
        font-size: 1.5em;
        padding: 0 10px;
      }

      .tax-year {
        font-size: 1em;
      }

      .regime-title {
        font-size: 1em;
      }

      .breakdown-container {
        padding: 12px;
      }

      .breakdown-row {
        font-size: 0.9em;
      }

      .clear-input {
        width: 24px;
        height: 24px;
        font-size: 24px;
      }
    }

    /* Remove the share text class since we're not using it anymore */
    .share-text {
      display: none;
    }

    /* Toast notification */
    .share-toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #323232;
      color: white;
      padding: 12px 24px;
      border-radius: 4px;
      font-size: 0.9em;
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
      z-index: 1001;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    .share-toast.show {
      opacity: 1;
    }

    /* Remove the extra padding we added earlier */
    @media (min-width: 601px) {
      body {
        padding-top: 20px;
      }
    }

    /* Tax Summary Styles */
    .tax-summary {
      display: flex;
      gap: 15px;
      margin-bottom: 25px;
      justify-content: space-between;
    }

    .tax-box {
      flex: 1;
      background-color: #f8f9fa;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      border: 1px solid #e0e0e0;
      transition: all 0.3s ease;
    }

    .tax-box.highlighted {
      background-color: #e8f5e9;
      border-color: #4caf50;
    }

    .regime-label {
      font-size: 0.9em;
      color: #666;
      margin-bottom: 8px;
      font-weight: 500;
    }

    .tax-amount {
      font-size: 1.4em;
      font-weight: 500;
      color: #333;
    }

    .tax-amount.better {
      color: #2e7d32;
    }

    /* Update recommendation styles */
    .recommendation {
      text-align: center;
      background-color: #f8f9fa;
      padding: 12px;
      border-radius: 6px;
      margin: 0 0 25px 0;
      border: 1px solid #e0e0e0;
    }

    .recommendation small {
      display: block;
      margin-top: 4px;
      color: #666;
    }

    @media (max-width: 600px) {
      .tax-summary {
        flex-direction: column;
        gap: 10px;
      }

      .tax-box {
        padding: 12px;
      }

      .tax-amount {
        font-size: 1.2em;
      }
    }

    .tax-label {
      font-size: 0.8em;
      color: #666;
      margin-bottom: 4px;
    }

    .effective-rate {
      font-size: 0.9em;
      color: #666;
      margin-top: 8px;
      padding-top: 8px;
      border-top: 1px solid #e0e0e0;
    }

    .tax-box {
      padding: 20px;
    }

    .tax-amount {
      font-size: 1.6em;
      font-weight: 600;
      color: #333;
    }

    @media (max-width: 600px) {
      .tax-amount {
        font-size: 1.4em;
      }
    }

    .break-even-hint {
      font-size: 0.9em;
      color: #1a73e8;
      margin-top: 8px;
      cursor: pointer;
      transition: color 0.2s;
    }

    .break-even-hint:hover {
      color: #1557b0;
      text-decoration: underline;
    }

    .deduction-amount {
      font-weight: 500;
      color: #4caf50;
    }

    /* Share Menu Styles */
    .share-menu {
      position: fixed;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 8px 0;
      display: none;
      z-index: 1001;
      width: 200px;
    }

    .share-menu.show {
      display: block;
    }

    .share-menu-item {
      padding: 8px 16px;
      cursor: pointer;
      white-space: nowrap;
      color: #333;
      font-size: 0.9em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .share-menu-item:hover {
      background-color: #f5f5f5;
    }

    .share-menu-item.disabled {
      color: #999;
      cursor: not-allowed;
    }

    .share-menu-item svg {
      width: 16px;
      height: 16px;
      fill: currentColor;
    }

    /* Bottom Share Button */
    .bottom-share {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid #eee;
    }

    .bottom-share-button {
      display: flex;
      align-items: center;
      gap: 8px;
      background-color: #1a73e8;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9em;
      transition: background-color 0.2s;
    }

    .bottom-share-button:hover {
      background-color: #1557b0;
    }

    .bottom-share-button svg {
      width: 16px;
      height: 16px;
      fill: currentColor;
    }

    .download-button {
      background-color: #4caf50;
    }

    .download-button:hover {
      background-color: #45a049;
    }

    @media (max-width: 600px) {
      .bottom-share {
        flex-direction: column;
        align-items: center;
      }

      .bottom-share button {
        width: 100%;
      }
    }

    /* Side Buttons */
    .side-buttons {
      position: fixed;
      top: 50%;
      right: 0;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 1000;
    }

    .side-button {
      background-color: #1a73e8;
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px;
      border-radius: 4px 0 0 4px;
      box-shadow: -2px 2px 8px rgba(0, 0, 0, 0.1);
      transition: all 0.2s ease;
      width: 32px;
      height: 32px;
    }

    .side-button:hover {
      background-color: #1557b0;
      width: 36px;
    }

    .side-button svg {
      width: 16px;
      height: 16px;
      fill: currentColor;
    }

    /* Footer Styles */
    .footer {
      text-align: center;
      padding: 20px;
      color: #666;
      font-size: 0.9em;
      margin-top: 20px;
    }

    .footer a {
      color: #1a73e8;
      text-decoration: none;
    }

    .footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      .side-button {
        width: 28px;
        height: 28px;
        padding: 6px;
      }

      .side-button:hover {
        width: 32px;
      }

      .side-button svg {
        width: 14px;
        height: 14px;
      }
    }

    /* Ensure all inputs use border-box */
    * {
      box-sizing: border-box;
    }
  </style>
</head>
<body>
  <!-- Side Buttons -->
  <div class="side-buttons">
    <button onclick="showShareMenu(event)" class="side-button" title="Share calculator">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92z"/>
      </svg>
    </button>
    <button onclick="downloadCalculation()" class="side-button" title="Download calculation">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
      </svg>
    </button>
  </div>

  <!-- Share Menu -->
  <div class="share-menu" id="shareMenu">
    <div class="share-menu-item" onclick="shareCalculator(false)" id="shareBlankMenuItem">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92z"/>
      </svg>
      Share Calculator
    </div>
    <div class="share-menu-item" onclick="shareCalculator(true)" id="shareWithValuesMenuItem">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92z"/>
      </svg>
      Share with Current Values
    </div>
  </div>

  <div class="container">
    <div class="header-container">
      <div class="tax-year">Financial Year 2025-26</div>
      <h1>Income Tax Calculator</h1>
      <p class="tagline">
        <span>Based on</span>
        <a href="https://www.indiabudget.gov.in/" target="_blank" class="budget-badge">Budget 2025</a>
        <span>announced on Feb 1, 2025</span>
      </p>
    </div>

    <p class="intro">
      Calculate and compare your tax liability under both the new and old regimes.
    </p>
    <!-- Annual Income Input -->
    <form id="taxForm" onsubmit="event.preventDefault();">
      <div class="error" id="errorMsg" style="display: none;"></div>
      <div class="input-container">
        <label for="income">Annual Income (₹):</label>
        <div class="input-wrapper">
          <input type="text" id="income" placeholder="e.g., 15,00,000" oninput="handleIncomeChange(this)" required />
          <button type="button" class="clear-input" onclick="clearInput('income')" id="clearIncome" aria-label="Clear income">×</button>
        </div>
        <!-- Quick Select Buttons (Scrollable) -->
        <div class="quick-select-container">
          <button type="button" class="quick-btn" onclick="setIncome(300000)">3L</button>
          <button type="button" class="quick-btn" onclick="setIncome(600000)">6L</button>
          <button type="button" class="quick-btn" onclick="setIncome(1200000)">12L</button>
          <button type="button" class="quick-btn" onclick="setIncome(1500000)">15L</button>
          <button type="button" class="quick-btn" onclick="setIncome(1800000)">18L</button>
          <button type="button" class="quick-btn" onclick="setIncome(2000000)">20L</button>
          <button type="button" class="quick-btn" onclick="setIncome(2500000)">25L</button>
          <button type="button" class="quick-btn" onclick="setIncome(3000000)">30L</button>
          <button type="button" class="quick-btn" onclick="setIncome(4000000)">40L</button>
          <button type="button" class="quick-btn" onclick="setIncome(5000000)">50L</button>
          <button type="button" class="quick-btn" onclick="setIncome(7500000)">75L</button>
          <button type="button" class="quick-btn" onclick="setIncome(10000000)">1Cr</button>
        </div>
      </div>
      
      <!-- Deductions Container -->
      <div id="deductionsContainer" style="display: none;">
        <label for="deductions">Total Deductions (₹):</label>
        <div class="input-wrapper">
          <input type="text" id="deductions" placeholder="e.g., 2,50,000" oninput="handleDeductionsChange(this)" required />
          <button type="button" class="clear-input" onclick="clearInput('deductions')" id="clearDeductions" aria-label="Clear deductions">×</button>
        </div>
        <p class="note" id="deductionNote">* Applicable only under the old tax regime.</p>
        <p class="break-even-hint" id="breakEvenHint"></p>
      </div>
    </form>

    <div id="result" class="result" style="display: none;">
      <!-- New Tax Summary Section -->
      <div class="tax-summary">
        <div class="tax-box new-regime">
          <div class="regime-label">New Regime</div>
          <div class="tax-label">Tax Amount</div>
          <div class="tax-amount" id="newRegimeTax"></div>
          <div class="effective-rate" id="newRegimeRate"></div>
        </div>
        <div class="tax-box old-regime">
          <div class="regime-label">Old Regime</div>
          <div class="tax-label">Tax Amount</div>
          <div class="tax-amount" id="oldRegimeTax"></div>
          <div class="effective-rate" id="oldRegimeRate"></div>
        </div>
      </div>
      
      <!-- Recommendation right below tax boxes -->
      <p class="recommendation" id="recommendation"></p>
      
      <h2>Tax Liability Comparison</h2>
      
      <!-- New Regime Section -->
      <div class="regime-section">
        <h3 class="regime-title">New Tax Regime Breakdown</h3>
        <div class="breakdown-container" id="newRegimeBreakdown">
          <div class="breakdown-details">
            <div id="newRegimeBreakdownDetails"></div>
          </div>
        </div>
      </div>

      <!-- Old Regime Section -->
      <div class="regime-section">
        <h3 class="regime-title">Old Tax Regime Breakdown</h3>
        <div class="breakdown-container" id="oldRegimeBreakdown">
          <div class="breakdown-details" id="oldRegimeBreakdownDetails"></div>
        </div>
      </div>

      <!-- Bottom Share Button -->
      <div class="bottom-share">
        <button onclick="showShareMenu(event, true)" class="bottom-share-button">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92z"/>
          </svg>
          Share These Results
        </button>
        <button onclick="downloadCalculation()" class="bottom-share-button download-button" style="display: none;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
          </svg>
          Download Calculation
        </button>
      </div>
    </div>
  </div>

  <!-- Resources Section -->
  <div class="resources">
    <h2>Trending Articles &amp; Resources on the New Income Tax Changes</h2>
    <div class="resource-grid" id="initialArticles">
      <!-- Custom Blog Post -->
      <div class="resource-item">
        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234285f4'%3E%3Cpath d='M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z'/%3E%3C/svg%3E" alt="Tax Guide Blog">
        <a href="blog.html">
          Complete Guide: Understanding the New Tax Structure 2025
        </a>
      </div>
      <!-- Indian News Articles First -->
      <div class="resource-item">
        <img src="https://www.thehindu.com/theme/images/th-online/og-image.png" alt="The Hindu" onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'%23000000\'%3E%3Cpath d=\'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z\'/%3E%3C/svg%3E';">
        <a href="https://www.thehindu.com/business/india-budget-new-tax-slabs" target="_blank">
          The Hindu: Impact on the Middle Class
        </a>
      </div>
      <div class="resource-item">
        <img src="https://static.toiimg.com/photo/msid-58124960/58124960.jpg" alt="Times of India" onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'%23000000\'%3E%3Cpath d=\'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z\'/%3E%3C/svg%3E';">
        <a href="https://timesofindia.indiatimes.com/india/budget-2025-income-tax-changes" target="_blank">
          Times of India: Budget 2025 – What You Need to Know
        </a>
      </div>
      <div class="resource-item">
        <img src="https://economictimes.indiatimes.com/photo/47529300.cms" alt="Economic Times" onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'%23000000\'%3E%3Cpath d=\'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z\'/%3E%3C/svg%3E';">
        <a href="https://economictimes.indiatimes.com/wealth/income-tax-new-rates-impact-on-salary" target="_blank">
          Economic Times: Impact on Your Take-Home Salary
        </a>
      </div>
      <div class="resource-item">
        <img src="https://bsmedia.business-standard.com/_media/bs/img/article/2020-12/27/full/1609102714-1909.jpg" alt="Business Standard" onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'%23000000\'%3E%3Cpath d=\'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z\'/%3E%3C/svg%3E';">
        <a href="https://www.business-standard.com/article/budget/budget-2025-how-tax-cuts-affect-salaried-individuals" target="_blank">
          Business Standard: Impact on Salaried Individuals
        </a>
      </div>
    </div>

    <!-- Show More Button -->
    <div class="show-more-container">
      <button id="showMoreBtn" class="show-more-btn" onclick="toggleAdditionalArticles()">View more articles</button>
    </div>

    <!-- Additional Articles (Initially Hidden) -->
    <div class="resource-grid" id="additionalArticles" style="display: none;">
      <div class="resource-item">
        <img src="https://www.livemint.com/lm-img/mint-logo.png" alt="Mint" onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'%23000000\'%3E%3Cpath d=\'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z\'/%3E%3C/svg%3E';">
        <a href="https://www.livemint.com/budget/2025/new-tax-regime-benefits-for-taxpayers" target="_blank">
          Mint: Benefits for Indian Taxpayers
        </a>
      </div>
      <div class="resource-item">
        <img src="https://www.ndtv.com/common/images/ogndtv.png" alt="NDTV" onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'%23000000\'%3E%3Cpath d=\'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z\'/%3E%3C/svg%3E';">
        <a href="https://www.ndtv.com/business/income-tax-calculator-new-vs-old-regime-2025" target="_blank">
          NDTV: Simplified Tax Calculation Explained
        </a>
      </div>
      <div class="resource-item">
        <img src="https://www.hindustantimes.com/images/app-images/ht/og-image.png" alt="Hindustan Times" onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'%23000000\'%3E%3Cpath d=\'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z\'/%3E%3C/svg%3E';">
        <a href="https://www.hindustantimes.com/india-news/2025-budget-new-tax-regime-guide" target="_blank">
          Hindustan Times: Detailed Guide to the New Regime
        </a>
      </div>
      <!-- International News at the bottom -->
      <div class="resource-item">
        <img src="https://www.reuters.com/pf/resources/images/reuters/reuters-default.png?d=127" alt="Reuters" onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'%23000000\'%3E%3Cpath d=\'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z\'/%3E%3C/svg%3E';">
        <a href="https://www.reuters.com/world/india/new-tax-slabs-2025-budget" target="_blank">
          Reuters: New Income Tax Slabs Announced in 2025 Budget
        </a>
      </div>
    </div>
  </div>

  <!-- Add toast notification div -->
  <div id="shareToast" class="share-toast">Link copied to clipboard!</div>

  <!-- Add Footer -->
  <div class="footer">
    Email <a href="mailto:jimmey.apps@gmail.com">jimmey.apps@gmail.com</a> for support
    <br>
    <span style="color: #666; font-size: 0.9em; margin-top: 8px; display: block;">All calculations are performed securely in your browser - no data is sent to any server.</span>
  </div>

  <!-- Add jsPDF library before closing body tag -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  
  <!-- Add tax calculator script -->
  <script src="tax-calculator.js"></script>

  <!-- UI interaction scripts -->
  <script>
    function toggleAdditionalArticles() {
      const additionalArticles = document.getElementById('additionalArticles');
      const showMoreBtn = document.getElementById('showMoreBtn');
      
      if (additionalArticles.style.display === 'none') {
        additionalArticles.style.display = 'grid';
        showMoreBtn.textContent = 'Show fewer articles';
        showMoreBtn.classList.add('expanded');
      } else {
        additionalArticles.style.display = 'none';
        showMoreBtn.textContent = 'View more articles';
        showMoreBtn.classList.remove('expanded');
      }
    }

    function showShareMenu(event, isBottomButton = false) {
      event.stopPropagation();
      const shareMenu = document.getElementById('shareMenu');
      const shareWithValuesMenuItem = document.getElementById('shareWithValuesMenuItem');
      const button = event.target.closest('button');
      const buttonRect = button.getBoundingClientRect();
      
      // Get current values
      const income = document.getElementById('income').value;
      const deductions = document.getElementById('deductions').value;
      
      // Enable/disable share with values option based on input
      if (income) {
        shareWithValuesMenuItem.classList.remove('disabled');
      } else {
        shareWithValuesMenuItem.classList.add('disabled');
      }

      // Calculate menu position
      const menuHeight = 82; // Height of the menu with two options
      const menuWidth = 200; // Approximate width of the menu
      const buttonWidth = buttonRect.width;
      const buttonCenter = buttonRect.left + (buttonWidth / 2);
      const menuLeft = Math.max(10, Math.min(buttonCenter - (menuWidth / 2), window.innerWidth - menuWidth - 10));

      // Position menu above the button
      shareMenu.style.position = 'fixed';
      shareMenu.style.bottom = `${window.innerHeight - buttonRect.top + 10}px`;
      shareMenu.style.left = `${menuLeft}px`;
      shareMenu.style.right = 'auto';
      shareMenu.style.top = 'auto';
      shareMenu.style.transform = 'none';

      shareMenu.classList.add('show');
    }

    // Close share menu when clicking outside
    document.addEventListener('click', function(event) {
      const shareMenu = document.getElementById('shareMenu');
      if (!event.target.closest('.share-menu') && !event.target.closest('.share-button') && !event.target.closest('.bottom-share-button')) {
        shareMenu.classList.remove('show');
      }
    });

    async function shareCalculator(includeValues = false) {
      let url = window.location.href.split('?')[0];
      
      if (includeValues) {
        const income = document.getElementById('income').value;
        const deductions = document.getElementById('deductions').value;
        
        if (!income) return; // Don't share if no income entered
        
        const params = new URLSearchParams();
        params.set('income', income.replace(/,/g, ''));
        if (deductions) {
          params.set('deductions', deductions.replace(/,/g, ''));
        }
        url = `${url}?${params.toString()}`;
      }

      try {
        // Try to use the native share API (mobile devices)
        if (navigator.share && /mobile|android|iphone|ipad/i.test(navigator.userAgent)) {
          await navigator.share({
            title: 'Income Tax Calculator 2025-26',
            text: 'Calculate and compare your income tax under both old and new regimes for FY 2025-26',
            url: url
          });
        } else {
          // Desktop fallback: Copy to clipboard
          await navigator.clipboard.writeText(url);
          const toast = document.getElementById('shareToast');
          toast.textContent = 'Link copied to clipboard!';
          toast.classList.add('show');
          setTimeout(() => {
            toast.classList.remove('show');
          }, 2000);
        }
      } catch (err) {
        console.log('Error sharing:', err);
        // Fallback if clipboard API fails
        try {
          const textArea = document.createElement('textarea');
          textArea.value = url;
          document.body.appendChild(textArea);
          textArea.select();
          document.execCommand('copy');
          document.body.removeChild(textArea);
          
          const toast = document.getElementById('shareToast');
          toast.textContent = 'Link copied to clipboard!';
          toast.classList.add('show');
          setTimeout(() => {
            toast.classList.remove('show');
          }, 2000);
        } catch (fallbackErr) {
          console.log('Fallback error:', fallbackErr);
        }
      }

      // Hide menu after sharing
      document.getElementById('shareMenu').classList.remove('show');
    }

    // Check URL parameters on page load
    window.addEventListener('DOMContentLoaded', function() {
      const params = new URLSearchParams(window.location.search);
      const income = params.get('income');
      const deductions = params.get('deductions');
      
      if (income) {
        document.getElementById('income').value = formatNumberWithCommas(income);
        handleIncomeChange(document.getElementById('income'));
        
        if (deductions) {
          document.getElementById('deductions').value = formatNumberWithCommas(deductions);
          handleDeductionsChange(document.getElementById('deductions'));
        }
      }
    });

    function downloadCalculation() {
      const income = document.getElementById('income').value;
      const deductions = document.getElementById('deductions').value;
      
      if (!income) {
        const toast = document.getElementById('shareToast');
        toast.textContent = 'Please enter income to download calculation';
        toast.classList.add('show');
        setTimeout(() => {
          toast.classList.remove('show');
        }, 2000);
        return;
      }

      // Get tax calculations
      const { tax: taxNew, breakdown: breakdownNew } = calculateNewRegimeTax(parseNumberWithCommas(income));
      const { tax: taxOld, breakdown: breakdownOld } = calculateOldRegimeTax(parseNumberWithCommas(income), parseNumberWithCommas(deductions || '0'));

      // Create PDF
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      
      // Set font
      doc.setFont("helvetica");
      
      // Add title
      doc.setFontSize(16);
      doc.text("Income Tax Calculation (FY 2025-26)", 15, 20);
      
      // Add website info
      doc.setFontSize(10);
      doc.text("Generated from www.indiaincometax.in", 15, 30);
      
      // Add basic info
      doc.setFontSize(12);
      doc.text(`Annual Income: ₹${income}`, 15, 45);
      if (deductions) {
        doc.text(`Total Deductions: ₹${deductions}`, 15, 55);
      }

      // Add tax comparison
      doc.setFontSize(14);
      doc.text("Tax Comparison", 15, 70);
      doc.setFontSize(12);
      doc.text(`New Regime Tax: ₹${formatNumberWithCommas(taxNew)}`, 15, 80);
      doc.text(`Old Regime Tax: ₹${formatNumberWithCommas(taxOld)}`, 15, 90);

      // Add recommendation
      let recommendation = '';
      if (taxNew < taxOld) {
        recommendation = `Recommendation: Choose the New Tax Regime (Save ₹${formatNumberWithCommas(taxOld - taxNew)} annually)`;
      } else if (taxOld < taxNew) {
        recommendation = `Recommendation: Choose the Old Tax Regime (Save ₹${formatNumberWithCommas(taxNew - taxOld)} annually)`;
      } else {
        recommendation = "Note: Both tax regimes result in the same tax liability";
      }
      doc.text(recommendation, 15, 100);

      // Add breakdowns
      doc.setFontSize(14);
      doc.text("New Regime Breakdown:", 15, 120);
      let yPos = 130;
      breakdownNew.forEach(item => {
        doc.setFontSize(10);
        doc.text(`${item.label}: ₹${formatNumberWithCommas(item.amount)}`, 20, yPos);
        yPos += 8;
      });

      // Check if we need a new page for old regime breakdown
      if (yPos > 250) {
        doc.addPage();
        yPos = 20;
      }

      doc.setFontSize(14);
      doc.text("Old Regime Breakdown:", 15, yPos + 10);
      yPos += 20;
      breakdownOld.forEach(item => {
        doc.setFontSize(10);
        doc.text(`${item.label}: ₹${formatNumberWithCommas(item.amount)}`, 20, yPos);
        yPos += 8;
      });

      // Add footer
      doc.setFontSize(8);
      const pageCount = doc.internal.getNumberOfPages();
      for (let i = 1; i <= pageCount; i++) {
        doc.setPage(i);
        doc.text(
          `Generated on ${new Date().toLocaleDateString()}`,
          15,
          doc.internal.pageSize.height - 10
        );
        doc.text(
          `Page ${i} of ${pageCount}`,
          doc.internal.pageSize.width - 30,
          doc.internal.pageSize.height - 10
        );
      }

      // Save the PDF
      doc.save('tax-calculation.pdf');

      // Show toast
      const toast = document.getElementById('shareToast');
      toast.textContent = 'Tax calculation downloaded as PDF!';
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 2000);
    }

    function clearInput(inputId) {
      const input = document.getElementById(inputId);
      input.value = '';
      document.getElementById(`clear${inputId.charAt(0).toUpperCase() + inputId.slice(1)}`).style.display = 'none';
      
      if (inputId === 'income') {
        handleIncomeChange(input);
      } else {
        handleDeductionsChange(input);
      }
    }

    function updateClearButton(input) {
      const clearButton = document.getElementById(`clear${input.id.charAt(0).toUpperCase() + input.id.slice(1)}`);
      clearButton.style.display = input.value ? 'block' : 'none';
    }
  </script>
</body>
</html>